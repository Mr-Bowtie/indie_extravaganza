<p style="color: green"><%= notice %></p>

<div class="container">
  <div class="level">
    <div class="level-left"><h1 class="title is-1">Books</h1></div>
    <div class="level-right mb-2">
      <%= form_with url: "/books", method: :get do |form| %>
        <%= form.label :tag, "Filter by tag:", class: "pt-3" %>
        <div class="select is-rounded is-small">
          <%= form.select :tag, Tag.all.collect { |t| [t.name, t.id] }, include_blank: true %>
        </div>
        <%= form.submit "apply filter", class: "button is-primary" %>
      <% end %>
    </div>
  </div>
  <% if @filters %>
    <div class="container mb-4">
      <div class="level is-mobile is-justify-content-center">
        <div class="level-left">
          <p class="subtitle mb-1 mr-2">Active Filters:</p>
          <div class="tags">
            <% @filters.each do |filter| %>
              <span class="tag is-medium is-info"><%= filter %></span>
            <% end %>
          </div>
        </div>
      </div>
      <div class="is-flex is-justify-content-center mb-2">
        <%= link_to "Clear filters", books_path, class: "button is-danger is-outlined" %>
      </div>
    </div>
  <% end %>
  <%== pagy_bulma_nav(@pagy) %>
  <div class="tile is-ancestor is-flex-wrap-wrap" id="books">
    <% @books.each do |book| %>
      <%= render(Books::GalleryCardComponent.new(book: book)) %>
      <%= render(Books::GalleryQuickViewComponent.new(book: book)) %>
    <% end %>
  </div>
  <div class="level">
    <div class="level-left"></div>
    <div class="level-right">
      <%== pagy_bulma_nav(@pagy) %>
    </div>
  </div>
</div>

<%= link_to "New book", new_book_path %>
